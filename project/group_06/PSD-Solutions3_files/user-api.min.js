!function(){var a=window.UserServerApi||(window.UserServerApi={});a.cookies=a.cookies||{},a.cookies.setCookie=function(a,b,c,d,e,f){window[a]=b;var g=a+"="+b;g+=c?";expires="+new Date((new Date).getTime()+c).toGMTString():"",g+=";path="+(e||"/"),g+=d?";domain="+d:"",g+=f?";secure":"",document.cookie=g},a.cookies.getCookie=function(a){if(window[a])return window[a];for(var b=document.cookie.split(/;\s*/),c=0;c<b.length;c++)if(0===b[c].indexOf(a+"="))return b[c].substr(a.length+1);return null},a.cookies.deleteCookie=function(a){var b=window.location.host;b=b.substring(b.indexOf(".")+1),this.setCookie(a,"",-864e5,b,"/")}}(),function(){function a(a){for(var b=1;b<arguments.length;b++)for(var c in arguments[b])a[c]=arguments[b][c];return a}function b(a){return-1===a.indexOf("//www.")?a:a.replace(/\/\/www\./g,"//"+window.location.host.substr(0,window.location.host.indexOf("."))+".")}function c(a,b,c,d){var f="_"+(e.comm.jsonpCallbacks.counter++).toString(36),g=function(){clearTimeout(k),delete e.comm.jsonpCallbacks[f],document.getElementsByTagName("head")[0].removeChild(j)},h=function(a,b){g(),b.success?d(b):c(b)},i=function(){g(),c()};b+="&accept=jsonp",b+="&callback=UserServerApi.comm.jsonpCallbacks."+f,b+="&callerId="+f,b+="get"===a.toLowerCase()?"":"&_method="+a.toLowerCase();var j=document.createElement("script");j.type="text/javascript",j.src=b,j.onerror=i,document.getElementsByTagName("head")[0].appendChild(j);var k=setTimeout(i,6e4);e.comm.jsonpCallbacks[f]=h}function d(a,c,d,e){var f=new XMLHttpRequest;c=b(c),f.open(a,c+"&accept=json",!0),f.withCredentials=!0,f.onerror=f.ontimeout=f.onabort=function(){d(f)},f.onload=function(){if(f.responseText)try{var a=JSON.parse?JSON.parse:eval,b=a(f.responseText);return void(b.success?e(b,f):d(b,f))}catch(c){}d(f)},f.send()}var e=window.UserServerApi||(window.UserServerApi={});e.comm=e.comm||{},e.comm.sendRequest=function(b,f,g,h,i){var j=[];e.getOptions().urlParams.language||(e.getOptions().urlParams.language=e.getUserLanguage()),g=a({},e.getOptions().urlParams,g);for(var k in g)if(g[k]||"boolean"==typeof g[k])if("[object Array]"===Object.prototype.toString.apply(g[k]))for(var l=0;l<g[k].length;l++)j.push(encodeURIComponent(k)+"="+encodeURIComponent(g[k][l]));else j.push(encodeURIComponent(k)+"="+encodeURIComponent(g[k]));f+=j.length?"?"+j.join("&"):"",e.getOptions().jsonpEnabled?c(b,f,h,i):d(b,f,h,i)},e.comm.jsonpCallbacks={counter:0}}(),function(){function a(a){for(var b=1;b<arguments.length;b++)for(var c in arguments[b])a[c]=arguments[b][c];return a}function b(a,b){var c="/"===a.substr(-1)?a.substring(0,a.length-1):a,d="/"===b.substr(0,1)?b.substring(1):b;return c+"/"+d}function c(a){window.LoginDialog.getCaptchaService()&&window.LoginDialog.getCaptchaService().get_challenge&&window.LoginDialog.getCaptchaService().get_response&&a()}var d=window.UserServerApi||(window.UserServerApi={});d.consts={userColorServerKey:"color",userColorClientKey:"userColor"};var e={languageCookie:"wixLanguage",helperCookie:"wixClient",mainCookie:"wixSession",uidCookie:"_wixUIDX",clientIdCookie:"_wixCIDX",languages:{en:"en",es:"es",pt:"pt",fr:"fr",ru:"ru",de:"de",pl:"pl",it:"it",ja:"ja",ko:"ko",tr:"tr"},usersDomain:"https://users.wix.com/wix-users",jsonpEnabled:!0,urlParams:{source:"",suid:"",orgDocID:"null-doc-id",appUrl:window.location.protocol+"//"+window.location.host+window.location.pathname,urlThatUserRedirectedFrom:window.location.protocol+"//"+window.location.host+window.location.pathname}},f=function(){for(var a={},b=window.location.search.slice(1).split("&"),c=0;c<b.length;c++)a[b[c].split("=")[0]]=decodeURIComponent(b[c].split("=")[1]);return a}(),g={};g[d.consts.userColorClientKey]=d.consts.userColorServerKey;var h={login:{method:"GET",url:"/auth/login",queryParams:a({},g)},loginByGuid:{method:"GET",url:"/auth/loginByGuid",queryParams:a({},g)},socialLogin:{method:"GET",url:"/social/login/{providerId}",pathVariables:["providerId"],queryParams:a({},g)},getSocialConnections:{method:"GET",url:"/social/connection"},createSocialConnection:{method:"POST",url:"/social/connection/{providerId}",pathVariables:["providerId"]},revokeSocialConnection:{method:"DELETE",url:"/social/connection/{providerId}",pathVariables:["providerId"]},createUser:{method:"GET",url:"/auth/register",queryParams:a({},g)},forgotPassword:{method:"GET",url:"/auth/forgotPassword"},getUserDetails:{method:"GET",url:"/user/getUserDetails"},updateUser:{method:"GET",url:"/user/update"},setLanguage:{method:"GET",url:"/user/setLanguage"}};a(d,{setOptions:function(b){return b&&(b=a({},b),a(e.urlParams,b.urlParams||{}),delete b.urlParams,a(e,b)),d},getOptions:function(){return e},userAction:function(c,g,i,j){var k,l=b(e.usersDomain,h[c].url);if(h[c].pathVariables)for(k=0;k<h[c].pathVariables.length;k++)l=l.replace("{"+h[c].pathVariables[k]+"}",g[h[c].pathVariables[k]]),delete g[h[c].pathVariables[k]];if(h[c].queryParams){var m={},n=h[c].queryParams;for(k in n)f[k]?m[n[k]]=f[k]:e[k]&&(m[n[k]]=e[k]);for(var o in g){var p,q,r,s=g[o],t="object"==typeof s;if(t){r=o;for(var u in s)p=[r,u].join("."),q=s[u],g[p]=q;delete g[r]}}g=a(m,g)}d.comm.sendRequest(h[c].method,l,g,i,j)},getClientParams:function(){var b=d.cookies.getCookie(e.helperCookie);if(b){'"'===b[0]&&'"'===b[b.length-1]&&(b=JSON.parse(b));var c=b.split("|"),f={userName:c[0],email:c[1],mailStatus:c[2],permissions:c[3],isSessionNew:c[4],isSessionValid:c[5],userID:c[6]};return c[7]&&a(f,JSON.parse(c[7])),f}return null},getUserLanguage:function(){var a=window.location.host.split("."),b=2===a[0].length?a[0]:null;return b=b||d.cookies.getCookie(e.languageCookie),b=b||navigator.language||navigator.browserLanguage,e.languages[b]||"en"},login:function(b,e,f,g,h,i){c(function(){var a=window.LoginDialog.getCaptchaService().get_challenge(),b=window.LoginDialog.getCaptchaService().get_response();try{window.LoginDialog.experimentMap.indexOf("RecaptchaABTest")>-1&&a&&b&&(i=i||{},i.recaptchaParams={},i.recaptchaParams.recaptcha_challenge_field=a,i.recaptchaParams.recaptcha_response_field=b)}catch(c){}}),d.userAction("login",a({email:b,password:e,rememberMe:f,enhanced:0},i),g,h)},socialLogin:function(b,c,e,f,g){c=a(c,g),d.userAction("socialLogin",a({providerId:b},c),e,f)},getSocialConnections:function(a,b){d.userAction("getSocialConnections",null,a,b)},createSocialConnection:function(b,c,e,f){d.userAction("createSocialConnection",a({providerId:b},c),e,f)},revokeSocialConnection:function(a,b,c,e){d.userAction("revokeSocialConnection",{providerId:a,forceDisconnect:e},b,c)},loginByGuid:function(a,b,c,e,f){d.userAction("loginByGuid",{guid:a,password:b,rememberMe:c,enhanced:0},e,f)},createUser:function(b,e,f,g,h){var i=a(h,{email:b,password:e});i.sendEmail=h&&h.sendEmail===!1?"false":"true",c(function(){var a=window.LoginDialog.getCaptchaService().get_challenge(),b=window.LoginDialog.getCaptchaService().get_response();try{window.LoginDialog.experimentMap.indexOf("RecaptchaABTest")>-1&&a&&b&&(i.recaptchaParams={},i.recaptchaParams.recaptcha_challenge_field=a,i.recaptchaParams.recaptcha_response_field=b)}catch(c){}}),d.userAction("createUser",i,f,g)},forgotPassword:function(a,b,c){d.userAction("forgotPassword",{email:a},b,c)},setLanguage:function(a,b,c){e.urlParams.language=a,d.userAction("setLanguage",null,b,c)},getUserDetails:function(a,b){d.userAction("getUserDetails",null,a,b)},updateUser:function(a,b,c,e,f,g,h){var i={newUserName:b,newEmail:e,optInMail:f,newPassword:c,password:a};d.userAction("updateUser",i,g,h)},getToken:function(){return d.cookies.getCookie(e.mainCookie)},isSessionValid:function(){return d.getClientParams()&&d.getToken()},isUnknownUser:function(){var a=d.cookies.getCookie(e.uidCookie);return!a||"null-user-id"===a},logout:function(){d.cookies.deleteCookie(e.mainCookie),d.cookies.deleteCookie(e.helperCookie)},getClientId:function(){var a=d.cookies.getCookie(e.clientIdCookie);return a||"null-client-id"},getPetriExperiments:function(a,b,c){var d=[];this._openExperiments=d,a(d,b,c)}})}();